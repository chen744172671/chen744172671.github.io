---
title: "高可用"
date: 2023-03-09T20:20:02-23:00
last_modified_at: 2023-05-05T16:20:02-05:00
categories:
  - 学习
---

架构：

	DNS服务器
		域名解析
	F5/LVS(虚拟IP)
		4层负载均衡，转发请求
	Nginx
		7层负载均衡做反向代理
	CDN
		内容分发网络，存放静态的文件
	docker容器
		镜像、容器、仓库
	K8s
		容器集群管理系统
	分布式缓存redis
		可能出现缓存服务器网卡满载的情况
	分布式文件系统HDFS
	分布式数据库
		读数据库/写数据库
		主从复制
	Nosql数据库
		MongDb、Hbase、Hive
	全文搜索引擎
		ElasticSearch
			基于Lucene封装，向外提供简单的API接口调用
			全文检索(先创建索引，建立索引库，再搜索索引)
			分词、相关性评分
			非结构化数据
	中间件
		Kafka/RocketMQ消息队列
			死信队列
				不会消费的消息放到该队列
			削峰填谷
				在应用和下游通知系统之间加入消息队列
			异步解耦
			顺序收发
				指定一个Topic,按照严格的先进先出顺序进行生产消费
			分布式事务一致性
				注册前发起一个半事务的消息，注册成功则提交半事务产生注册成功消息，注册失败则回滚半事务消息不产生消息
			分布式缓存同步
				广播消费模式
					消息会被所有节点消费一次，取代缓存的作用
			实时日志处理
		数据库中间件MyCat(拦截)
			读写分离
				binlog日志
					异步复制
					半同步复制
					全同步复制
			分库分表
			多数据源整合
				同时写入多个数据库，主从故障切换，存入非业务型数据到Nosql中
	Linux
		通过ulimit -a可以查看相关参数
			Linux最大文件句柄数(默认单进程打开的最大句柄数是1024)
		grep --color -n "leo" /etc/passwd 查找在文件中的哪一行和内容
			grep -C 3 leo passwd选项，表示除了展示匹配行之外，还要展示出匹配行上面和下面各若干行
			-i选项，不要区分大小写
		perf 命令性能分析⼯具, 会返回 CPU 正在执⾏的函数名以及调⽤栈(stack)，和Flame Graph⽣成⽕焰图

